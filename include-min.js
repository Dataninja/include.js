!function(t){var e={},a=[],o=1,n=document.getElementsByTagName("base")[0],r=document.getElementsByTagName("head")[0];function c(t,e,o){var n=this;"string"!=typeof t&&(o=e,e=t,t=null),e.constructor!==[].constructor&&(o=e,e=[]),a.unshift([t,e,o]),n.uid=Math.random().toString(36).replace(/[^a-z0-9]+/g,"").substr(0,10),n.checkModuleLoaded(),e.length&&n.each(e,n.parseFiles)}c.prototype.each=function(t,e){var a;for(a=0;a<t.length&&(void 0===t[a]||!1!==e.call(this,t[a],a,t));a++);},c.prototype.getId=function(t,e){return(e?"":this.uid+"-")+t.replace(/[^a-z0-9]+/g,"")},c.prototype.getFileName=function(){var t=document.querySelectorAll("script"),e=t[t.length-1],a=document.location.href.split("/"),o=e.src;return a.pop(),a=a.join("/"),o.replace(a,"").substring(1)},c.prototype.checkModuleLoaded=function(){var t=this;t.each(a,function(n,r){var c=n[0],i=n[1],d=n[2],u=[];t.each(i,function(a,o,n){o=a.push?a[0]:a,(n=document.querySelector('[data-id*="'+t.getId(o,1)+'"]'))&&"LINK"==n.nodeName?u.push(null):void 0!==e[o]&&u.push(e[o])}),i.length!==u.length&&0!==i.length||(null===c&&r+1===a.length&&(a=[],o=1),d="function"==typeof d?d.apply(this,u):d,e[c||t.getFileName()]=d)})},c.prototype.onModuleLoaded=function(t,n){n>a.length?(o--,e[t]=e[t]||o):null===a[0][0]&&(a[0][0]=t),this.checkModuleLoaded()},c.prototype.onLoad=function(t,e){var a=t.currentTarget||t.srcElement;"load"!==t.type&&"complete"!=a.readyState||(a.setAttribute("data-loaded",!0),this.onModuleLoaded(a.getAttribute("data-module"),a.getAttribute("data-count")),a.attachEvent?a.detachEvent("onreadystatechange",e):a.removeEventListener("load",e))},c.prototype.watchCss=function(t){for(var e=this,a=document.styleSheets,o=a.length,n=t.href.split("//").pop();o--;)if(-1!=a[o].href.indexOf(n))return t.setAttribute("data-loaded",!0),void e.onModuleLoaded(t.getAttribute("data-module"),t.getAttribute("data-count"));setTimeout(function(){e.watchCss.call(e,t)})},c.prototype.attachEvents=function(t,e){var a=this,o=function(){var t=Array.prototype.slice.call(arguments);t.push(o),a.onLoad.apply(a,t)};e?t.attachEvent?t.attachEvent("onreadystatechange",o):t.addEventListener("load",o,!0):a.watchCss(t)},c.prototype.checkExists=function(t,e){var a=!1;return this.each(document.getElementsByTagName(e?"script":"link"),function(e){if(e.getAttribute("data-module")&&e.getAttribute("data-module")===t)return a=e,!1}),a},c.prototype.create=function(t,e,a){var c=this;setTimeout(function(){var i=c.checkExists.call(c,t,a);i||(o++,i=document.createElement(a?"script":"link"),a?(i.async=!0,i.type="text/javascript",i.src=e):(i.media="all",i.href=e,i.rel="stylesheet"),i.setAttribute("data-id",c.getId(t)),i.setAttribute("data-module",t),i.setAttribute("data-count",o),i.setAttribute("data-loaded",!1),n?n.parentNode.insertBefore(i,n):r.appendChild(i),c.attachEvents.call(c,i,a))},0)},c.prototype.parseFiles=function(t){var a,o=t.push?t[0]:t,n=t.push?t[1]:t;e[o]?this.checkModuleLoaded():(-1!=n.indexOf("//")||/\.js/.test(n)||/^http/.test(n)||(n=n.replace(/\./g,"/"),n+=".js"),a="js"==n.split(".").pop(),this.create.call(this,o,n,a))},t.load=function(t,e,a){return new c(t,e,a)}}(this);
